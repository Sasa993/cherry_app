{% extends "two_factor/login_base.html" %}
{% load i18n two_factor %}

{% block title %}
  Login
{% endblock %}

{% block content %}
  {# <h1>{% block title %}{% trans "Login" %}{% endblock %}</h1> #}

  {% if wizard.steps.current == 'auth' %}
    <h5>{% blocktrans %}ENTER YOUR CREDENTIALS{% endblocktrans %}</h5>
    <a class="button secondaryAction forgot-password" href="{% url 'account_reset_password' %}">{% trans "Forgot Password?" %}</a>
  {% elif wizard.steps.current == 'token' %}
    {% if device.method == 'call' %}
      <p>{% blocktrans %}We are calling your phone right now, please enter the
        digits you hear.{% endblocktrans %}</p>
    {% elif device.method == 'sms' %}
      <h5>{% blocktrans %}WE SENT YOU A TEXT MESSAGE,<br> PLEASE ENTER THE TOKENS WE SENT.{% endblocktrans %}</h5>
    {% else %}
      <p>{% blocktrans %}Please enter the tokens generated by your token
        generator.{% endblocktrans %}</p>
    {% endif %}
  {% elif wizard.steps.current == 'backup' %}
    <h5>{% blocktrans %}USE THIS FORM FOR ENTERING BACKUP TOKENS FOR LOGGING IN.<br>THESE TOKENS HAVE BEEN GENERATED FOR YOU TO PRINT AND KEEP SAFE.<br>PLEASE ENTER ONE OF THESE BACKUP TOKENS TO LOGIN TO YOUR ACCOUNT.{% endblocktrans %}</h5>
  {% endif %}

  <form action="" method="post">
    {% csrf_token %}
    {% include "two_factor/_wizard_forms.html" %}
    
    {# hidden submit button to enable [enter] key #}
    <div style="margin-left: -9999px; overflow: hidden; float: left;"><input type="submit" value=""/></div>

    {% if other_devices %}
      <p>{% trans "Or, alternatively, use one of your backup phones:" %}</p>
      <p>
        {% for other in other_devices %}
        <button name="challenge_device" value="{{ other.persistent_id }}"
                class="btn btn-default btn-block backup-token" type="submit">
          {{ other|device_action }}
        </button>
      {% endfor %}</p>
    {% endif %}
    {% if backup_tokens %}
      <p style="margin-top:0">{% trans "As a last resort, you can use a backup token:" %}</p>
      <p>
        <button name="wizard_goto_step" type="submit" value="backup" class="btn btn-default btn-block backup-token" id="backup-token">{% trans "Use Backup Token" %}</button>
      </p>
    {% endif %}

    {% include "two_factor/_wizard_actions.html" %}
  </form>
{% endblock %}
